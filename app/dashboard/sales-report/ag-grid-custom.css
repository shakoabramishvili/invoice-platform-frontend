/* Force BOTH filter button and menu button (vertical ellipsis) to always show */
.ag-header-cell-filter-button,
.ag-header-cell-menu-button {
  opacity: 1 !important;
  display: inline-flex !important;
  visibility: visible !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  align-items: center !important;
  justify-content: center !important;
  margin-left: 4px !important;
  min-width: 20px !important;
  min-height: 20px !important;
  background: transparent !important;
}

/* Force filter button to ALWAYS show (not just when filter is active) */
.ag-header-cell .ag-header-cell-filter-button {
  opacity: 1 !important;
  display: inline-flex !important;
  visibility: visible !important;
}

/* Remove the "filter active" only behavior */
.ag-header-cell:not(.ag-header-cell-moving) .ag-header-cell-filter-button {
  opacity: 1 !important;
  visibility: visible !important;
  display: inline-flex !important;
}

/* Style AG Grid's built-in filter icon */
.ag-icon-filter {
  opacity: 1 !important;
  visibility: visible !important;
  display: inline-block !important;
  color: currentColor !important;
  font-size: 16px !important;
}

.ag-icon-filter:hover {
  opacity: 1 !important;
  color: var(--ag-foreground-color) !important;
}

/* Fallback: Create filter icon if AG Grid icon doesn't show */
.ag-header-cell-filter-button::after {
  content: '' !important;
  font-size: 16px !important;
  line-height: 1 !important;
  display: block !important;
  position: absolute !important;
  opacity: 0.7 !important;
}

.ag-header-cell-filter-button:hover::after {
  opacity: 1 !important;
}

/* Ensure menu button always renders with content */
.ag-header-cell-menu-button {
  position: relative !important;
}

.ag-header-cell-menu-button::before {
  content: '︙' !important;
  font-size: 20px !important;
  font-weight: bold !important;
  line-height: 1 !important;
  display: inline-block !important;
  position: relative !important;
  opacity: 1 !important;
  color: currentColor !important;
  z-index: 1 !important;
}

.ag-header-cell-menu-button:hover::before {
  opacity: 1 !important;
  color: var(--ag-foreground-color) !important;
}

/* Hide AG Grid's built-in menu icon and replace with custom */
.ag-icon-menu-alt,
.ag-icon-menu {
  font-size: 0 !important; /* Hide original icon */
  width: 16px !important;
  height: 16px !important;
}

.ag-icon-menu-alt::before,
.ag-icon-menu::before {
  content: '︙' !important;
  font-size: 18px !important;
  font-weight: bold !important;
  opacity: 1 !important;
  visibility: visible !important;
  display: inline-block !important;
  color: currentColor !important;
}

.ag-icon-menu-alt:hover::before,
.ag-icon-menu:hover::before {
  opacity: 1 !important;
  color: var(--ag-foreground-color) !important;
}

/* Force all icons to be visible */
.ag-header-cell-filter-button .ag-icon,
.ag-header-cell-menu-button .ag-icon {
  opacity: 1 !important;
  visibility: visible !important;
  display: inline-block !important;
}

/* Remove hover-only behavior - always show both buttons */
.ag-header-cell:not(.ag-header-cell-moving) .ag-header-cell-filter-button,
.ag-header-cell:not(.ag-header-cell-moving) .ag-header-cell-menu-button {
  opacity: 1 !important;
  visibility: visible !important;
  display: inline-flex !important;
}

/* Ensure both buttons are part of header cell layout */
.ag-header-cell-comp-wrapper {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
}

/* Make sure both icons render for themeAlpine */
.ag-theme-alpine .ag-header-cell-filter-button,
.ag-theme-alpine .ag-header-cell-menu-button {
  opacity: 1 !important;
  visibility: visible !important;
  display: inline-flex !important;
}

.ag-theme-alpine .ag-icon-filter,
.ag-theme-alpine .ag-icon-menu-alt,
.ag-theme-alpine .ag-icon-menu {
  opacity: 1 !important;
  visibility: visible !important;
  display: inline-block !important;
}

.ag-theme-alpine .ag-header-cell-filter-button:hover .ag-icon-filter,
.ag-theme-alpine .ag-header-cell-menu-button:hover .ag-icon-menu-alt,
.ag-theme-alpine .ag-header-cell-menu-button:hover .ag-icon-menu {
  opacity: 1 !important;
}

/* Ensure header has space for label and both icons */
.ag-header-cell-label {
  flex: 1 !important;
  display: flex !important;
  align-items: center !important;
}

/* Force both buttons to appear at end of header */
.ag-header-cell {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
}

/* Remove default row background colors */
.ag-row,
.ag-row-even,
.ag-row-odd {
  background-color: transparent !important;
}

.ag-theme-alpine .ag-row,
.ag-theme-alpine .ag-row-even,
.ag-theme-alpine .ag-row-odd {
  background-color: transparent !important;
}

/* Reduce font size in cells only (not headers) */
.ag-cell {
  font-size: 12px !important;
}

.ag-theme-alpine .ag-cell {
  font-size: 12px !important;
}

/* Add right border to cells only (creates single vertical lines) */
.ag-cell {
  border-right: 1px solid var(--ag-border-color, #e2e8f0) !important;
}

.ag-theme-alpine .ag-cell {
  border-right: 1px solid var(--ag-border-color, #e2e8f0) !important;
}

/* Dark mode borders for cells */
.dark .ag-cell,
.dark .ag-theme-alpine .ag-cell {
  border-right: 1px solid rgba(255, 255, 255, 0.1) !important;
}
